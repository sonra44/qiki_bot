##  Этап 5: Создание `system_health_monitor.py`

###  Цель:

Создать централизованный мониторинг состояния ключевых компонентов системы:

* Агенты (по `last_heartbeat`)
* Сенсоры (по обновляемости `telemetry.json`)
* FSM (`fsm_state.json`)
* Миссии (`mission_state.json`)
* Логи и файлы критической информации

---

###  Что должен делать модуль:

1.  Проверять время последнего изменения ключевых `.json` файлов
2.  Оценивать статус:

   * `OK` — обновлён < 3 сек назад
   * `STALE` — не обновлялся > 3 сек
   * `DEAD` — не обновлялся > 10 сек
3.  Проводить базовую валидацию:

   * Пустые поля
   * Неверные форматы (например, `fsm_state.json` не соответствует схеме)
4.  Формировать отчёт вида:

```json
{
  "fsm_state": "OK",
  "mission_state": "STALE",
  "telemetry.json": "OK",
  "agent_status": {
    "agent_01": "OK",
    "agent_02": "STALE",
    "agent_03": "DEAD"
  }
}
```

5.  Логировать результат в `logs/health_report.log` — раз в 5 секунд

---

##  Файлы, которые мониторим:

| Файл                 | Описание                          |
| -------------------- | --------------------------------- |
| `fsm_state.json`     | Состояние конечного автомата FSM  |
| `telemetry.json`     | Сырые данные сенсоров             |
| `mission_state.json` | Статусы текущих миссий            |
| `shared_bus.json`    | Глобальный "шина" статуса агентов |
| `qiki_boot_log.json` | Статус при загрузке               |

---

##  Команда для Gemini CLI:

```
Создай файл tools/system_health_monitor.py.
Он должен проверять свежесть обновлений следующих файлов:

- fsm_state.json
- telemetry.json
- mission_state.json
- shared_bus.json
- qiki_boot_log.json

Если файл не обновлялся >3 сек — статус STALE, >10 сек — DEAD.

Также проверь last_heartbeat в shared_bus.json у агентов. Выведи статус каждого: OK / STALE / DEAD.

Логи пиши в logs/health_report.log.
Запуск — каждые 5 секунд. Используй time.sleep, без asyncio.

Весь результат должен быть логгируемый, в JSON-формате.

Если файл не существует — статус `MISSING`.

Когда модуль готов — запиши лог в task-005-response.md.
```

---